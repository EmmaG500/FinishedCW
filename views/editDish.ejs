<%- include('header.ejs') %>
    <section id="editDish" class="container px-4 pb-5 pt-4" style="background-color:#F9F9F9;">
        <div class="row">
            <div class=" col-12 mt-2">
                <div class="pl-5 row">
                    <div class="pl-5 col row">
                        <div class="col-md-3 col-sm-0"></div>
                        <!-- heading -->
                        <div class='font-weight-light col-sm-12 col-md-4 h3'><strong>EDIT DISH</strong></div>
                        <!-- add ingredient -->
                        <div class="col-sm-12 col-md-5"><a class="fa-solid fa-plus mx-0 px-0 pr-1" href="/addIngredient"
                                style="text-decoration: none; color:black"></a>Add Ingredient</div>
                    </div>
                </div>
                <div class="row mx-auto w-50 bg-white rounded shadow-sm p-3">
                    <div class="col mx-auto pb-4">
                        <!-- form -->
                        <form id="editEntry" name="editDish" action="/editDish/:<%=dish._id%>" method="POST">
                            <div class="row mb-3">
                                <div class="col-md-12">
                                    <!-- dish name prepoulated -->
                                    <div class="md-form">
                                        <label for="formGroupExampleInput">Name:</label>
                                        <input type="text" id="name" name="name" class="form-control"
                                            value="<%=dish.name%>" maxlength="20" required>

                                    </div>
                                </div>
                            </div>
                            <div class="row mb-3">
                                <div class="col-md-12">
                                    <!-- dish section prepopulated -->
                                    <div class="md-form">
                                        <label for="formGroupExampleInput">Section:</label>
                                        <select class="form-control" name="section">
                                            <option value="Specials" <% if(dish.section==="Specials" ){ %>
                                                selected="selected"<%}%>>Specials</option>
                                            <option value="Appetizers" <% if(dish.section==="Appetizers" ){ %>
                                                selected="selected"<%}%>>Appetizers</option>
                                            <option value="Mains" <% if(dish.section==="Mains" ){ %> selected="selected"
                                                <%}%>>Mains</option>
                                            <option value="Side Dishes" <% if(dish.section==="Side Dishes" ){ %>
                                                selected="selected"<%}%>>Side Dishes</option>
                                            <option value="Desserts" <% if(dish.section==="Desserts" ){ %>
                                                selected="selected"<%}%>>Desserts</option>
                                        </select>

                                    </div>
                                </div>
                            </div>
                            <div class="row mb-3">
                                <div class="col-md-12">
                                    <div class="md-form">
                                        <!-- dish ingredients pre-selected -->
                                        <label for="formGroupExampleInput">Ingredients:</label>
                                        <select multiple class="form-control" id="exampleFormControlSelect2"
                                            name="ingredients">
                                            <% ingredients.forEach(function(ingredient){%>
                                                <!-- name displayed for ingredient with ingredient being passed on submit - if ingredient id exists in dish, preselect it -->
                                                <option value="<%=ingredient._id%>" <%
                                                    if(dish.ingredients.includes(ingredient._id)){ %>
                                                    selected="selected"<%}%>><%=ingredient.name%>
                                                </option>
                                                <%})%>
                                        </select>
                                        <!-- tip for selecting ingredients -->
                                        <abbr class="initialism text-muted" style="font-size:11px">(hold CTRL then click
                                            to select your ingredients)</abbr>
                                    </div>
                                </div>
                            </div>
                            <div class="row mb-3">
                                <!-- dish description -->
                                <div class="col-md-12">
                                    <div class="md-form">
                                        <label for="exampleFormControlTextarea1">Description:</label>
                                        <textarea class="form-control" id="description" name="description" rows="3"
                                            placeholder="Max. 125 characters" maxlength="125"
                                            required><%=dish.description%></textarea>

                                    </div>
                                </div>
                            </div>
                            <div class="row mb-3">
                                <!-- dish price -->
                                <div class="col-md-12">
                                    <div class="md-form">
                                        <label for="formGroupExampleInput">Price:</label>
                                        <input type="number" id="price" name="price" class="form-control"
                                            placeholder="0.00" value="<%=dish.price%>" step='0.01' required>

                                    </div>
                                </div>
                            </div>
                            <div class="row mb-3">
                                <div class="ml-4 form-check">
                                    <!-- is dish visible, if yes pre select -->
                                    <input class="form-check-input" type="checkbox" <% if(dish.visible){%> checked<%}%>
                                        id="visible" name="visible">
                                        <label for="visible">Visible</label>
                                </div>
                                <div class="ml-4 form-check">
                                    <!-- is dish vegan, if yes pre select -->
                                    <input class="form-check-input" type="checkbox" value="true" id="vegan" name="vegan"
                                        <% if(dish.vegan){%> checked<%}%>>
                                        <label class="form-check-label" for="vegan">
                                            Vegan
                                        </label>
                                </div>
                                <div class="ml-4 form-check">
                                    <!-- is dish vegetarian, if yes pre select -->
                                    <input class="form-check-input" type="checkbox" value="true" id="vegetarian"
                                        name="vegetarian" <% if(dish.vegetarian){%> checked<%}%>>
                                        <label class="form-check-label" for="vegetarian">
                                            Vegetarian
                                        </label>
                                </div>
                                <div class="ml-4 form-check">
                                    <!-- is dish pescetarian, if yes pre select -->
                                    <input class="form-check-input" type="checkbox" value="true" id="pescetarian"
                                        name="pescetarian" <% if(dish.pescetarian){%> checked<%}%>>
                                        <label class="form-check-label" for="pescetarian">
                                            Pescetarian
                                        </label>
                                </div>
                                <div class="ml-4 form-check">
                                    <!-- is dish gluten free, if yes pre select -->
                                    <input class="form-check-input" type="checkbox" value="true" id="gluten free"
                                        name="gf" <% if(dish.glutenFree){%> checked<%}%>>
                                        <label class="form-check-label" for="gluten free">
                                            Gluten Free
                                        </label>
                                </div>
                            </div>
                            <!-- submit -->
                            <div class="text-center mx-auto">
                                <input style="background-color:#F5E9E9" type="submit" class="btn btn-block shadow-sm"
                                    value="Submit">
                            </div>

                        </form>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <%- include('footer.ejs') %>